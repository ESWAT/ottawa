(function(){$(function(){var a;return a=new Calendar})}).call(this),function(){var a,b,c,d,e;c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=["January","February","March","April","May","June","July","August","September","October","November","December"],b=[31,28,31,30,31,30,31,31,30,31,30,31],d="https://www.googleapis.com/calendar/v3/calendars/infilexfil.com_ij0amp5h2lir3tlf4sqfpb2geo@group.calendar.google.com/events?key=AIzaSyCJq9lb_y7fnomgGFsDFBRzngucKZL-Ri8",a=function(a,f){return this.month=isNaN(a)||null==a?(new Date).getMonth():a,this.year=isNaN(f)||null==f?(new Date).getFullYear():f,React.renderComponent(MonthHeading({monthLabel:e[this.month]}),document.getElementById("month-heading")),React.renderComponent(CalendarShell({currentMonth:this.month,dayHeadings:c,monthLength:b[this.month],startOffset:new Date(this.year,this.month,1).getDay(),url:d,pollInterval:432e5}),document.getElementById("calendar"))}}.call(this),function(){var a,b,c,d,e,f,g,h,i;h=React.DOM,g=React.createClass({render:function(){return h.span({"class":"month-heading"},""+this.props.monthLabel+" "+(new Date).getFullYear())}}),a=React.createClass({loadCalendarFeed:function(){return $.get(this.props.url,function(a){return this.isMounted()?this.setState({eventsList:a.items}):void 0}.bind(this))},getInitialState:function(){return{eventsList:[]}},componentDidMount:function(){return this.loadCalendarFeed(),setInterval(this.loadCalendarFeed,this.props.pollInterval)},render:function(){return h.table({id:"calendar",className:"calendar"},d({dayHeadings:this.props.dayHeadings}),c({currentMonth:this.props.currentMonth,monthLength:this.props.monthLength,startOffset:this.props.startOffset,eventsList:this.state.eventsList}))}}),d=React.createClass({render:function(){var a;return h.thead({className:"days-of-week"},h.tr(null,function(){var b,c,d,e;for(d=this.props.dayHeadings,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(h.th({className:"days-of-week--label"},""+a));return e}.call(this)))}}),c=React.createClass({getCurrentEvents:function(){var a,b,c,d,e,f;for(c=[],f=this.props.eventsList,d=0,e=f.length;e>d;d++)a=f[d],b=new Date(a.start.dateTime).getMonth(),b===this.props.currentMonth&&c.push(a);return c},render:function(){var a,b;return a=this.getCurrentEvents(),h.tr({id:"day-grid"},h.td({colSpan:7},function(){var c,d,e;for(e=[],b=c=1,d=this.props.monthLength+this.props.startOffset;d>=c;b=c+=7)e.push(i({rowHeight:100/Math.ceil((this.props.monthLength+this.props.startOffset)/7)+"%",currentEvents:a,startOffset:8>b?this.props.startOffset:0,daysCounted:8>b?b:b-this.props.startOffset,monthLength:this.props.monthLength}));return e}.call(this)))}}),i=React.createClass({render:function(){var a,c,d,e,f,g,i;return i={height:this.props.rowHeight},h.div({className:"week-wrap",style:i},h.table({className:"week"},function(){var a,c,d;if(this.props.startOffset>0){for(d=[],f=a=1,c=this.props.startOffset;c>=1?c>=a:a>=c;f=c>=1?++a:--a)d.push(b({date:"",specialClass:" day--outside"}));return d}}.call(this),function(){var f,h,i,j,k,l,m;for(m=[],c=f=j=this.props.daysCounted,k=this.props.daysCounted+6-this.props.startOffset;k>=j?k>=f:f>=k;c=k>=j?++f:--f){for(e=[],l=this.props.currentEvents,h=0,i=l.length;i>h;h++)a=l[h],d=new Date(a.start.dateTime).getDate(),d===c&&e.push(a);g="",g+=c<=this.props.monthLength?"":" day--outside",g+=c===(new Date).getDate()?" day--today":"",m.push(b({date:c<=this.props.monthLength?c:"",eventsForDay:e,specialClass:g}))}return m}.call(this)))}}),b=React.createClass({render:function(){var a;return h.td({className:"day"+this.props.specialClass},h.h3({className:"day-label"},this.props.date),function(){var b,c,d,e;if(this.props.eventsForDay){for(d=this.props.eventsForDay,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(f({eventInfo:a,onClick:this.showEvent}));return e}}.call(this))}}),f=React.createClass({getInitialState:function(){return{handledClick:!1,showEventDetails:!1}},componentDidMount:function(){return window.addEventListener("click",this.hideEvent)},showEvent:function(){return this.setState({handledClick:!0,showEventDetails:!0})},hideEvent:function(a){var b,c,d;return c=a.target.offsetParent.className,d=a.target.className,b="event-details",c!==b&&d!==b&&(this.state.showEventDetails&&this.state.handledClick!==!0&&this.setState({showEventDetails:!1}),this.state.handledClick)?this.setState({handledClick:!1}):void 0},render:function(){return h.div({className:"event"},h.h4({className:"event__label",onClick:this.showEvent},h.span({className:"event__time"},""+moment(this.props.eventInfo.start.dateTime).format("H:mm")+" "),h.span({className:"event__summary"},""+this.props.eventInfo.summary)),this.state.showEventDetails?e({eventInfo:this.props.eventInfo}):void 0)}}),e=React.createClass({render:function(){return h.div({className:"event-details"},h.h2({className:"event-details__title"},""+this.props.eventInfo.summary),h.p({className:"event-details__date"},""+moment(this.props.eventInfo.start.dateTime).format("H:mm")+" - "+moment(this.props.eventInfo.end.dateTime).format("H:mm")),h.p({className:"event-details__description"},""+this.props.eventInfo.description))}})}.call(this);